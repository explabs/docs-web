---
sidebar_position: 3
---

# Инструкция по установке SSH
 > OpenSSH - это средство подключения для удаленного входа, использующее протокол SSH. Оно шифрует весь трафик между клиентом и сервером для предотвращения перехвата информации, перехвата подключения и других атак.
 SSH (от англ. secure shell - безопасная оболочка) - это набор программ, которые позволяют регистрироваться на компьютере по сети, удаленно выполнять на нем команды, а также копировать и перемещать файлы между компьютерами. SSH организует защищенное безопасное соединение поверх небезопасных каналов связи.

:::info
Всю информацию о протоколе **SSH** можно найти [здесь](http://xgu.ru/wiki/SSH)
:::

## Установка OpenSSH на Linux 
В Debain и производных (Kali Linux, Linux Mint, Ubuntu), программы OpenSSH можно установить по отдельности, например, имеются пакеты для клиента и для сервера openssh-client и openssh-server. Либо можно установить метапакет ssh, который содержит и клиентскую, и серверную часть. Для установки выполните следующие шаги:
1. Откройте терминал с помощью сочетания клавиш `Ctrl`+`Alt`+`T`
2. Выполните команду:
```
sudo apt install openssh-client
```


## Установка OpenSSH на Windows
OpenSSH можно использовать для подключения устройств с Windows 10 (версия 1809 и более поздние) или Windows Server 2019 с установленным клиентом OpenSSH к таким устройствам с установленным сервером OpenSSH.
### Установка OpenSSH с помощью приложения "Параметры" в Windows
Чтобы установить компоненты OpenSSH, сделайте следующее:

1. Нажмите кнопку `Win` (Пуск) 
2. Введите в поисковую строку `Приложения и возможности`

![скрин 1](/img/images/SSH_1.png)

3. Зайдите в `Приложения и возможности`, выберите  `Дополнительные компоненты`

![скрин 2](/img/images/SSH_2.png)

4. В `Установленные компоненты` найдите **Клиент OpenSSH**

![скрин 3](/img/images/SSH_3.png)

Если Вы его нашли, значит он установлен.

5. Если его нет, то нажмите `Добавить компонент`, найдите **Клиент OpenSSH** и установите его.

![скрин 4](/img/images/SSH_4.png)

После завершения установки вернитесь в раздел `Приложения и возможности` и `Дополнительные возможности`, где теперь должно появиться средство **OpenSSH**.

### Установка OpenSSH с помощью PowerShell
Чтобы установить OpenSSH с помощью PowerShell, запустите PowerShell от имени администратора. 
1. Для проверки доступности OpenSSH выполните следующий командлет:
```
Get-WindowsCapability -Online | Where-Object Name -like 'OpenSSH*'
```
2. Если Клиент OpenSSH и Сервер OpenSSh не установлены, должно отобразиться следующее:
```
Name  : OpenSSH.Client~~~~0.0.1.0
State : NotPresent

Name  : OpenSSH.Server~~~~0.0.1.0
State : NotPresent
```
3. Необходимо загрузить клиентский компонент:
```
# Install the OpenSSH Client
Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0
```
4. Командлет должн вернуть такие выходные данные:
```
Path          :
Online        : True
RestartNeeded : False
```



## Установка OpenSSH на MacOS 
MacOS поставляется с установленным по умолчанию клиентом OpenSSH.


## SSH - ключи 
Ключи позволяют авторизоваться на виртуальном сервере более безопасным, чем используя пароль. Для их создания , предназначена команда **ssh-keygen**. С ее помощью генерируется пара ключей: публичный ключ ( **public key** ) и приватный ключ ( **private key** ). Ключи сохраняются в папку **.ssh**. 
```
ssh-keygen
```


### Общие принципы протокола SSH:
- Секретный ключ всегда остается у клиента и никому никогда не показывается.
- **Публичный ключ** копируется на удаленный SSH сервер и кладется в специальный файл. 
Открытый ключ выглядит вот так:
```
ssh-rsa AAAAB3NzaC1yc2EAAAABJQAAAQEAiez5r6NN01TK5yFPCV34Po4UdsMej4Gbl441SAzGihcE3eV7bSnLRR32RKH8T6ZQ2eZSZ1zPD6xkGnBE0CXvlHLP76nva4AaoCoPAEDIbNKLVmPiKn6U6MDlkass6TFrfOBlsY3m+rZyWJipZEFLrptvqli72lkWttUNfwgu8CJKMBbjGsd4HS3EFwCrSsKqI2MBKk7SO3+DNrwAPUWK9O/hT/mqARMMMbD/zM0BrHZ/U9mc3w/x2y2awpONJF9yVjfXAvG6JTrB+Bh6pr2BYccmVAwPmXkQM+3HrFjS7nfSZnjBQE3YD6PTZfT7Qs6V15CoCvIaoRQs0AEBJLK53Q== rsa-key-20180427
```
- Клиент, отправляет SSH серверу свой **публичный ключ** и запрашивает аутентификацию по данному ключу.
- SSH-сервер отправляет клиенту сообщение, зашифрованное найденным публичным ключом пользователя.
- Клиент должен расшифровать сообщение с помощью своего приватного ключа, если приватный ключ защищен паролем (**Passphrase**), программа ssh, попросит пользователя ввести пароль, чтобы сначала расшифровать сам ключ.
- Если сообщение расшифровано, правильность публичного и приватного, ключей, считается подтвержденной и пользователю предоставляется доступ в систему.


### Passphrase
Ключевая фраза SSH-ключа используется только для защиты вашего закрытого ключа. Он никогда не передается через Интернет. Если вы решите не защищать ключ парольной фразой, просто нажмите клавишу возврата, когда ssh-keygen спросит.

:::info
Всю информацию о **Passphrase** можно найти [здесь](https://help.ubuntu.com/community/SSH/OpenSSH/Keys)
:::

